<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>theclassics.school – How to Use This Site</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;700&display=swap" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="./styles.css" />

</head>
<body>
  <nav class="primary-nav" aria-label="Primary">
    <div class="nav-links">
      <a href="#" id="homeLink" class="active">Home</a>
      <a href="#" id="lessonsLink">Lessons</a>
      <a href="#" id="quizzesLink">Quizzes</a>
      <a href="#" id="notesLink">Notes</a>
      <a href="#" id="openSettingsBtn" class="nav-link--settings">Settings</a>
    </div>
  </nav>
  <header class="site-header">
    <div class="brand">
      <h1>theclassics.school</h1>
      <p>A Place to Read, Discover, and Grow</p>
    </div>
  </header>
  <section class="hero" data-section="home">
    <h2>Welcome to theclassics.school</h2>
    <p>Here you’ll find structured lessons inspired by timeless works of literature, philosophy, and beyond.</p>
  </section>
  <section class="auth-card" id="homeAuthPanel" data-auth-panel data-section="home">
    <div class="auth-card__header">
      <h3>Sign in to continue</h3>
      <p class="helper-text">Send a secure sign-in link to your email. The prompt will disappear after you’re signed in.</p>
    </div>
    <div class="auth-card__body">
      <div class="auth-card__fields">
        <label for="emailForSignInHome">Account email</label>
        <input id="emailForSignInHome" data-auth-email type="email" placeholder="Enter your email" />
      </div>
      <div class="auth-card__actions">
        <p class="login-status" data-auth-status aria-live="polite">Not signed in</p>
        <button id="sendSignInLinkHome" data-auth-send data-email-field="emailForSignInHome">Send Sign-In Link</button>
      </div>
    </div>
  </section>
  <div id="passphraseGate" class="passphrase-gate" aria-live="polite">
    <div class="passphrase-card">
      <h3>Unlock your account</h3>
      <p class="helper-text">Enter your master passphrase to access lessons, settings, and notes. We only keep the key while this page is open.</p>
      <div class="vault-field">
        <label for="gatePassphrase">Master passphrase</label>
        <input id="gatePassphrase" type="password" autocomplete="current-password" placeholder="Enter your master passphrase" />
        <p class="passphrase-warning">If you never set one, choose a strong passphrase below to initialize your encrypted vault.</p>
        <div class="trusted-device-row">
          <input id="gateTrustedDevice" type="checkbox" />
          <label for="gateTrustedDevice">
            <span>Trusted computer</span>
            <span class="trusted-device-hint">(don't ask again)</span>
          </label>
        </div>
        <div class="passphrase-actions">
          <button id="gateUnlockBtn">Unlock</button>
          <button id="gateInitializeBtn" class="secondary">Set up new passphrase</button>
          <button id="gateGenerateBtn" class="secondary">Generate</button>
        </div>
      </div>
    </div>
  </div>
  <main>
    <div id="lockedContent">
      <section id="homeSection" class="page-section" data-section="home">
        <div class="course-search">
          <input type="text" id="courseSearch" placeholder="Search for a course..." />
        </div>
        <div class="course-list" id="courseList"></div>
      </section>
      <section id="lessonsSection" class="page-section section-hidden" data-section="lessons">
        <div id="lessonsContainer" class="lessons-container">
          <h2 id="selectedCourseTitle" style="color:var(--color-red);font-family:var(--font-classic);"></h2>
          <p id="selectedCourseDesc"></p>
          <h4 id="lessonProgress"></h4>
          <button id="closeCourseBtn" class="secondary" type="button">Close course</button>
          <button id="mobileSidebarToggle" class="sidebar-fab" type="button" aria-controls="lessonSidebar" aria-expanded="false">
            <i class="fa-solid fa-bars"></i>
            <span class="sidebar-fab__label">Lessons</span>
          </button>
          <div id="sidebarOverlay" class="sidebar-overlay" aria-hidden="true"></div>
          <div class="lesson-layout" id="lessonLayout">
            <aside class="lesson-sidebar" id="lessonSidebar">
              <div class="sidebar-header">
                <i class="fa-solid fa-feather sidebar-header-icon" id="sidebarToggle" title="Toggle Lessons Menu"></i>
                <h3 class="title-text">Lessons</h3>
              </div>
              <div class="lesson-list-wrapper">
                <ul id="lessonList" class="lesson-list"></ul>
              </div>
            </aside>
            <div id="lessonContent" class="lesson-content">
            </div>
          </div>
        </div>
      </section>
      <section id="quizzesSection" class="page-section section-hidden" data-section="quizzes">
        <div class="vault-card">
          <h3>Quizzes</h3>
          <p class="helper-text">Generate quizzes for the lesson you’re currently studying. Unlock with your passphrase first.</p>
          <p id="quizLessonContext" class="settings-note"></p>
          <div class="quiz-actions">
            <button id="generateQuizBtn">Generate Quiz</button>
            <div class="quiz-filter">
              <div class="quiz-filter__field">
                <label for="quizLessonFilter">Filter by lesson</label>
                <input id="quizLessonFilter" type="text" placeholder="Start typing a lesson title" />
              </div>
            </div>
          </div>
          <div class="quiz-layout">
            <div class="quiz-list" id="quizList"></div>
            <div class="quiz-details" id="quizDetails">
              <p class="settings-note">Select a saved quiz to see its details.</p>
            </div>
          </div>
          <p id="quizStatus" class="settings-status info" role="status"></p>
        </div>
      </section>
      <section id="notesSection" class="page-section section-hidden" data-section="notes">
        <div class="vault-card">
          <h3>Notes</h3>
          <p class="helper-text">Your lesson notes are encrypted with your master passphrase. Unlock to read or update them.</p>
          <div id="notesList" class="notes-list"></div>
          <p id="notesEmptyState" class="settings-note"></p>
        </div>
      </section>
      <section id="settingsSection" class="page-section section-hidden" data-section="settings">
        <div class="vault-card settings-panel">
          <h3>Account Settings</h3>
          <p class="settings-warning">Never lose your master passphrase. Without it, your encrypted data—including these settings—cannot be recovered.</p>
          <div id="settingsStatus" class="settings-status info" role="status" aria-live="polite"></div>
      <div class="settings-auth" data-auth-panel>
        <div class="settings-auth__grid">
          <div class="settings-field auth-input">
            <label for="emailForSignIn">Account email</label>
            <input id="emailForSignIn" data-auth-email type="email" placeholder="Enter your email" />
          </div>
          <div class="settings-auth__actions">
            <p id="loginStatus" class="login-status" data-auth-status aria-live="polite"></p>
            <button id="sendSignInLink" data-auth-send data-email-field="emailForSignIn">Send Sign-In Link</button>
          </div>
        </div>
      </div>
          <div id="settingsFields" style="display:none;">
            <div class="settings-field">
              <label for="settingsDisplayName">Display name</label>
              <input id="settingsDisplayName" type="text" placeholder="How you want to appear in the app" />
            </div>
            <div class="settings-field">
              <label for="settingsApiKey">OpenAI API key</label>
              <input id="settingsApiKey" type="password" placeholder="Paste your OpenAI API key" autocomplete="off" />
              <div class="settings-note">Stored only in your encrypted profile for lesson tools. Keep it private.</div>
            </div>
            <div class="settings-field">
              <label for="settingsMetadata">Account notes</label>
              <textarea id="settingsMetadata" rows="3" placeholder="Optional context about your account"></textarea>
            </div>
            <div class="settings-warning">Saving updates the encrypted profile in Firestore. Losing your passphrase will make this data inaccessible.</div>
          </div>
          <div class="settings-field">
            <label for="settingsNewPassphrase">Rotate passphrase (optional)</label>
            <input id="settingsNewPassphrase" type="password" autocomplete="new-password" placeholder="Enter a new master passphrase" />
            <div class="settings-note">Rotating creates a new encryption key. You must remember the new passphrase to keep access.</div>
          </div>
          <div class="settings-actions">
            <div class="settings-actions__primary">
              <button id="saveSettingsBtn" type="button">Save Settings</button>
              <button id="rotatePassphraseBtn" type="button" class="accent">Rotate Passphrase</button>
            </div>
            <button id="resetAccountBtn" type="button" class="danger">Reset encrypted data (irreversible)</button>
          </div>
        </div>
      </section>
    </div>
  </main>
  <footer>
    <p>© 2025 theclassics.school</p>
    <p>For inquiries, email <a href="mailto:info@theclassics.school" style="color:#fff;text-decoration:underline;">info@theclassics.school</a></p>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4/dist/js-yaml.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script type="module" src="./scripts/app.js"></script>
</body>
</html>
